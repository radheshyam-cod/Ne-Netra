const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/risk-map-COcMwpt3.js","assets/vendor-ui-BuuLDXGn.js","assets/vendor-react-ChnU68HB.js","assets/index-lhm59BYg.js","assets/vendor-charts-BrSaxJ5v.js","assets/vendor-icons-DLa0eLQi.js","assets/index-LX687-a0.css","assets/risk-map-B1CfjdFi.css"])))=>i.map(i=>d[i]);
import{c as e,B as s,a,b as t,_ as r}from"./index-lhm59BYg.js";import{j as i,R as l,T as n,C as o,q as c,r as d,s as x,a as m,O as g,t as h,g as u,W as p,f,h as j,v as b}from"./vendor-ui-BuuLDXGn.js";import{a as N,e as y,u as v,L as w}from"./vendor-react-ChnU68HB.js";import{C as k,a as _}from"./card-BcwQM_-b.js";import{C as A,a as R,b as D,c as C}from"./card-DWRYb4UK.js";import{X as S,n as T,m as $,c as E,o as I,j as L,p as P,q as F,r as z,I as M,s as O,t as W,B,N as H,M as U,u as G,v as q,a as V,w as Y,x as J,y as K,d as Q,z as X,E as Z,H as ee,F as se}from"./vendor-icons-DLa0eLQi.js";import{S as ae}from"./skeleton-5rCLF1cs.js";import{S as te}from"./severity-indicator-DxgOjEev.js";import"./vendor-charts-BrSaxJ5v.js";function re({...e}){return i.jsx(l,{"data-slot":"dialog",...e})}function ie({...e}){return i.jsx(n,{"data-slot":"dialog-trigger",...e})}function le({...e}){return i.jsx(m,{"data-slot":"dialog-portal",...e})}function ne({className:s,...a}){return i.jsx(g,{"data-slot":"dialog-overlay",className:e("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function oe({className:s,children:a,...t}){return i.jsxs(le,{"data-slot":"dialog-portal",children:[i.jsx(ne,{}),i.jsxs(o,{"data-slot":"dialog-content",className:e("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...t,children:[a,i.jsxs(c,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(S,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ce({className:s,...a}){return i.jsx("div",{"data-slot":"dialog-header",className:e("flex flex-col gap-2 text-center sm:text-left",s),...a})}function de({className:s,...a}){return i.jsx(d,{"data-slot":"dialog-title",className:e("text-lg leading-none font-semibold",s),...a})}function xe({className:s,...a}){return i.jsx(x,{"data-slot":"dialog-description",className:e("text-muted-foreground text-sm",s),...a})}function me({riskData:e,variant:a="icon"}){var t;const[r,l]=N.useState(!1),n=(e,s)=>{const a="rising"===s?"increasing":"falling"===s?"decreasing":"stable",t={critical:`ðŸ”´ Critical Priority Alert with ${a} trend`,high:`ðŸŸ  High Priority Signal with ${a} trend`,elevated:`ðŸŸ¡ Elevated Attention Signal with ${a} trend`,baseline:`ðŸŸ¢ Baseline Monitoring with ${a} trend`};return t[e]||t.baseline},o=(e,s)=>`This ${e}-level signal is shown because the AI analysis detected ${(s||"multiple factors").toLowerCase()} \n    in aggregated district-level data. The system combines three independent layers (Cognitive, Network, Physical) \n    to calculate an advisory risk score.`,c=e=>{const s={critical:"This score suggests immediate officer review and consideration of coordinated response measures.",high:"This score warrants priority attention and proactive monitoring by district authorities.",elevated:"This score indicates the need for enhanced situational awareness and routine oversight.",baseline:"This score reflects normal conditions requiring standard monitoring protocols."};return s[e]||s.baseline},d=()=>{if(!e.time_to_escalation)return"Time-to-escalation analysis is being calculated.";const{category:s,confidence:a}=e.time_to_escalation,t=a||"medium",r={IMMINENT:`Escalation window: Next 2 hours (${t} confidence). This is a heuristic early-warning indicator, not a prediction.`,EARLY:`Escalation window: 2-4 hours (${t} confidence). Provides advance notice for preparation.`,MONITOR:`Escalation window: 4-6 hours (${t} confidence). Continue routine monitoring.`,BASELINE:"No immediate escalation expected within 6-hour window. Maintain baseline protocols."};return r[s]||r.BASELINE},x=()=>"All analysis is performed on district-level aggregated data only. No individual tracking or surveillance. \n    This system provides decision support for human authorities - final decisions always remain with trained officers.",m=(()=>{const{score:s,primary_trigger:a,trend:t}=e;let r="baseline";return s>=75?r="critical":s>=60?r="high":s>=30&&(r="elevated"),{headline:n(r,t),explanation:o(r,a),actionContext:c(r),timeContext:d(),dataContext:x()}})(),g=()=>{if(!e.layer_scores)return null;const{cognitive:s,network:a,physical:t}=e.layer_scores,r=s+a+t,l=[{name:"Cognitive Layer",value:s,color:"bg-blue-500",desc:"Language patterns, sentiment, discourse themes"},{name:"Network Layer",value:a,color:"bg-purple-500",desc:"Message velocity, diffusion patterns, temporal dynamics"},{name:"Physical Layer",value:t,color:"bg-orange-500",desc:"Geographic sensitivity, border proximity, market density"}];return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h4",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[i.jsx(P,{className:"w-4 h-4"}),"Three-Layer Risk Model"]}),l.map(e=>{const s=r>0?e.value/r*100:0;return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-foreground-secondary font-medium",children:e.name}),i.jsxs("span",{className:"text-foreground tabular-nums",children:[s.toFixed(0),"%"]})]}),i.jsx("div",{className:"h-2 bg-background-tertiary rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${e.color} transition-all duration-500`,style:{width:`${s}%`}})}),i.jsx("p",{className:"text-xs text-foreground-tertiary",children:e.desc})]},e.name)})]})},h=y.forwardRef((e,t)=>"icon"===a?i.jsx(s,{ref:t,variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-background-tertiary","aria-label":"Why am I seeing this?",...e,children:i.jsx(T,{className:"h-4 w-4 text-foreground-secondary"})}):"button"===a?i.jsxs(s,{ref:t,variant:"outline",size:"sm",className:"gap-2",...e,children:[i.jsx(T,{className:"h-4 w-4"}),"Why am I seeing this?"]}):i.jsxs("button",{ref:t,className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",...e,children:[i.jsx(T,{className:"h-3 w-3"}),"Why am I seeing this?"]}));return i.jsxs(re,{open:r,onOpenChange:l,children:[i.jsx(ie,{asChild:!0,children:i.jsx(h,{})}),i.jsxs(oe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ce,{children:[i.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[i.jsx($,{className:"w-5 h-5 text-primary"}),"Why Am I Seeing This Alert?"]}),i.jsx(xe,{children:"Transparency breakdown of this risk assessment"})]}),i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs(A,{className:"p-4 border-l-4 border-l-primary bg-background-secondary",children:[i.jsx("h3",{className:"text-base font-semibold text-foreground mb-2",children:m.headline}),i.jsx("p",{className:"text-sm text-foreground-secondary leading-relaxed",children:m.explanation})]}),i.jsx(A,{className:"p-4",children:i.jsx(g,{})}),i.jsxs(A,{className:"p-4",children:[i.jsxs("h4",{className:"text-sm font-semibold text-foreground flex items-center gap-2 mb-3",children:[i.jsx(E,{className:"w-4 h-4"}),"Escalation Time Window"]}),i.jsx("p",{className:"text-sm text-foreground-secondary leading-relaxed",children:m.timeContext}),(null==(t=e.time_to_escalation)?void 0:t.basis_factors)&&i.jsxs("div",{className:"mt-3 space-y-1",children:[i.jsx("p",{className:"text-xs font-medium text-foreground-tertiary",children:"Basis factors:"}),i.jsx("ul",{className:"text-xs text-foreground-tertiary space-y-0.5 ml-4",children:e.time_to_escalation.basis_factors.map((e,s)=>i.jsx("li",{className:"list-disc",children:e},s))})]})]}),i.jsxs(A,{className:"p-4",children:[i.jsxs("h4",{className:"text-sm font-semibold text-foreground flex items-center gap-2 mb-3",children:[i.jsx(I,{className:"w-4 h-4"}),"What This Means For You"]}),i.jsx("p",{className:"text-sm text-foreground-secondary leading-relaxed",children:m.actionContext})]}),i.jsxs(A,{className:"p-4 bg-background-tertiary border-border",children:[i.jsxs("h4",{className:"text-sm font-semibold text-foreground flex items-center gap-2 mb-3",children:[i.jsx(L,{className:"w-4 h-4"}),"Data & Compliance"]}),i.jsx("p",{className:"text-sm text-foreground-secondary leading-relaxed",children:m.dataContext}),i.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:i.jsx("p",{className:"text-xs text-foreground-tertiary",children:"âœ“ DPDP Act 2023 aligned Â· âœ“ No individual surveillance Â· âœ“ District-level aggregation only Â· âœ“ Human-in-the-loop governance"})})]}),e.threshold_info&&i.jsxs("div",{className:"text-xs text-foreground-tertiary bg-background-secondary p-3 rounded-md border border-border",children:[i.jsx("strong",{children:"Threshold:"})," ",e.threshold_info.label," (",e.threshold_info.range,")"]})]})]})]})}function ge({score:e,trend:s,riskLevel:a,lastUpdated:t,components:r,layer_scores:l,district:n,primary_trigger:o,time_to_escalation:c,threshold_info:d,className:x}){const[m,g]=N.useState(!1),h={rising:{icon:I,label:"Rising (last 6 hours)",color:"text-severity-high"},stable:{icon:z,label:"Stable",color:"text-foreground-secondary"},falling:{icon:F,label:"Falling",color:"text-severity-low"}},u=h[s].icon,p={low:{color:"text-severity-low",bg:"bg-severity-low-bg",label:"Low Risk"},medium:{color:"text-severity-medium",bg:"bg-severity-medium-bg",label:"Medium Risk"},high:{color:"text-severity-high",bg:"bg-severity-high-bg",label:"High Risk"},critical:{color:"text-severity-critical",bg:"bg-severity-critical-bg",label:"Critical"}}[a],f={score:e,risk_level:a,trend:s,primary_trigger:o,layer_scores:l,time_to_escalation:c,threshold_info:d,district:n},j=({label:e,value:s,max:a,icon:t})=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm items-center",children:[i.jsxs("span",{className:"text-foreground-secondary flex items-center gap-2",children:[t&&i.jsx(t,{className:"w-3.5 h-3.5"}),e]}),i.jsxs("span",{className:"font-mono text-foreground font-medium",children:[s," / ",a]})]}),i.jsx("div",{className:"h-1.5 bg-background-tertiary rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary",style:{width:`${Math.min(100,s/a*100)}%`}})})]});return i.jsx(k,{variant:"elevated",className:x,children:i.jsxs(_,{className:"p-0",children:[i.jsxs("div",{className:"p-8 space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-foreground-secondary",children:"Composite Risk Score"}),i.jsx(me,{riskData:f,variant:"icon"})]}),t&&i.jsxs("p",{className:"text-xs text-foreground-tertiary",children:["Updated ",t]})]}),i.jsx("div",{className:"px-2 py-0.5 bg-background-tertiary rounded text-[10px] text-foreground-tertiary",children:"Sigmoid Activation Applied"})]}),i.jsxs("div",{className:"flex items-end gap-4",children:[i.jsx("div",{className:`text-7xl font-bold ${p.color} leading-none`,children:Math.round(e)}),i.jsx("div",{className:"mb-2 space-y-1",children:i.jsx("div",{className:"text-2xl text-foreground-secondary",children:"/100"})})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[i.jsx("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded ${p.bg} ${p.color} font-medium`,children:p.label}),i.jsxs("div",{className:`flex items-center gap-2 ${h[s].color}`,children:[i.jsx(u,{className:"w-5 h-5"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium text-sm",children:h[s].label}),"rising"===s&&i.jsxs("span",{className:"text-xs opacity-80",children:["Previous: ",(.8*e).toFixed(1)," â†’ Current: ",Math.round(e)]})]})]})]})]}),i.jsxs("div",{className:"border-t border-border",children:[i.jsxs("button",{onClick:()=>g(!m),className:"w-full flex items-center justify-between p-4 hover:bg-background-secondary transition-colors",children:[i.jsxs("span",{className:"font-medium text-foreground flex items-center gap-2",children:["Risk Score Breakdown (Explainable)",i.jsx(M,{className:"w-4 h-4 text-foreground-tertiary"})]}),m?i.jsx(O,{className:"w-5 h-5 text-foreground-secondary"}):i.jsx(W,{className:"w-5 h-5 text-foreground-secondary"})]}),m&&i.jsxs("div",{className:"p-4 bg-background-secondary space-y-6 border-t border-border animate-in slide-in-from-top-2",children:[l&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-foreground-tertiary mb-2",children:"3-Layer Risk Model"}),i.jsx(j,{label:"Cognitive Risk (Language/Sentiment)",value:Number(l.cognitive.toFixed(1)),max:10,icon:B}),i.jsx(j,{label:"Network Risk (Velocity/Spread)",value:Number(l.network.toFixed(1)),max:10,icon:H}),i.jsx(j,{label:"Physical Risk (Geo/Volatility)",value:Number(l.physical.toFixed(1)),max:10,icon:U})]}),i.jsx("div",{className:"h-px bg-border-subtle my-2"}),r&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-foreground-tertiary mb-2",children:"Raw Signals"}),i.jsx(j,{label:"Toxicity Signal",value:r.toxicity||0,max:30,icon:G}),i.jsx(j,{label:"Propagation Velocity",value:r.velocity||0,max:25,icon:G}),i.jsx(j,{label:"Geo-Sensitivity Weight",value:r.geo_sensitivity||0,max:25,icon:G}),i.jsx(j,{label:"Temporal Acceleration",value:r.temporal_acceleration||0,max:20,icon:G})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("p",{className:"text-xs text-foreground-tertiary italic",children:"Scores are derived from aggregated district-level signals using interpretable heuristics."}),i.jsxs("div",{className:"mt-2 text-[10px] text-foreground-tertiary bg-background-tertiary p-2 rounded border border-border-subtle",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"font-semibold uppercase tracking-wider",children:"System Config (Read-Only)"}),i.jsx("span",{children:"Updated: 2h ago"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsx("div",{children:"Cognitive Weight: 1.0"}),i.jsx("div",{children:"Network Weight: 1.0"}),i.jsx("div",{children:"Physical Weight: 1.0"})]}),i.jsxs("div",{className:"mt-2 border-t border-border-subtle pt-1 opacity-75",children:["Indic language normalization: ",i.jsx("span",{className:"font-mono",children:"Heuristic (Pilot-Only)"})]})]})]})]})]})]})})}function he({district:e,className:s}){const[t,r]=N.useState(null),[l,n]=N.useState(!0),[o,c]=N.useState(null);return N.useEffect(()=>{e&&async function(){n(!0);try{const s=await fetch(`http://localhost:8000/api/ai/briefing/${e}`);if(!s.ok)throw new Error("Failed to fetch briefing");const a=await s.json();r(a)}catch(s){c("Unable to load intelligence briefing")}finally{n(!1)}}()},[e]),l?i.jsxs(A,{className:a("overflow-hidden border-primary/20 bg-primary/5",s),children:[i.jsx(R,{className:"pb-2",children:i.jsxs(D,{className:"flex items-center gap-2 text-primary",children:[i.jsx(q,{className:"w-4 h-4 animate-pulse"}),"Intelligence Briefing"]})}),i.jsxs(C,{className:"space-y-4",children:[i.jsx(ae,{className:"h-20 w-full"}),i.jsx(ae,{className:"h-10 w-3/4"})]})]}):o||!t?i.jsx(A,{className:a("border-border/50",s),children:i.jsxs(C,{className:"p-6 flex items-center justify-center text-foreground-tertiary text-sm",children:[i.jsx(M,{className:"w-4 h-4 mr-2"}),o||"No briefing available"]})}):i.jsxs(A,{className:a("overflow-hidden border-primary/30 bg-gradient-to-br from-primary/10 via-background to-background relative group transition-all duration-500 hover:shadow-2xl hover:shadow-primary/5",s),children:[i.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-primary/10 rounded-full blur-3xl group-hover:bg-primary/20 transition-colors"}),i.jsx(R,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(D,{className:"flex items-center gap-2 text-primary font-bold tracking-tight",children:[i.jsx(q,{className:"w-5 h-5"}),"Intelligence Briefing"]}),i.jsx("div",{className:"px-2 py-0.5 rounded-full bg-primary/10 border border-primary/20 text-[10px] text-primary font-semibold uppercase tracking-widest animate-pulse",children:"Live AI Insights"})]})}),i.jsxs(C,{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("p",{className:"text-foreground leading-relaxed text-[15px] font-medium italic",children:['"',t.briefing,'"']}),i.jsx("div",{className:"absolute -left-2 top-0 bottom-0 w-1 bg-primary/30 rounded-full"})]}),t.urgent_alerts.length>0&&"No urgent flash alerts at this time"!==t.urgent_alerts[0]&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsxs("h4",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest flex items-center gap-1.5",children:[i.jsx(V,{className:"w-3 h-3"}),"Urgent Flash Alerts"]}),i.jsx("div",{className:"grid gap-2",children:t.urgent_alerts.map((e,s)=>i.jsx("div",{className:"p-2.5 rounded-lg bg-red-500/10 border border-red-500/20 text-xs text-red-400 font-medium",children:e},s))})]}),i.jsxs("div",{className:"pt-2 border-t border-border/50 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(I,{className:"w-4 h-4 text-primary/70"}),i.jsx("span",{className:"text-[11px] text-foreground-secondary font-semibold uppercase tracking-wider",children:"Temporal Outlook:"})]}),i.jsx("span",{className:"text-sm font-bold text-foreground",children:t.outlook})]})]})]})}var ue="AlertDialog",[pe]=f(ue,[h]),fe=h(),je=e=>{const{__scopeAlertDialog:s,...a}=e,t=fe(s);return i.jsx(l,{...t,...a,modal:!0})};je.displayName=ue;var be=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,r=fe(a);return i.jsx(n,{...r,...t,ref:s})});be.displayName="AlertDialogTrigger";var Ne=e=>{const{__scopeAlertDialog:s,...a}=e,t=fe(s);return i.jsx(m,{...t,...a})};Ne.displayName="AlertDialogPortal";var ye=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,r=fe(a);return i.jsx(g,{...r,...t,ref:s})});ye.displayName="AlertDialogOverlay";var ve="AlertDialogContent",[we,ke]=pe(ve),_e=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,children:t,...r}=e,l=fe(a),n=N.useRef(null),c=u(s,n),d=N.useRef(null);return i.jsx(p,{contentName:ve,titleName:Ae,docsSlug:"alert-dialog",children:i.jsx(we,{scope:a,cancelRef:d,children:i.jsxs(o,{role:"alertdialog",...l,...r,ref:c,onOpenAutoFocus:j(r.onOpenAutoFocus,e=>{var s;e.preventDefault(),null==(s=d.current)||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[i.jsx(b,{children:t}),i.jsx(Ee,{contentRef:n})]})})})});_e.displayName=ve;var Ae="AlertDialogTitle",Re=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,r=fe(a);return i.jsx(d,{...r,...t,ref:s})});Re.displayName=Ae;var De="AlertDialogDescription",Ce=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,r=fe(a);return i.jsx(x,{...r,...t,ref:s})});Ce.displayName=De;var Se=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,r=fe(a);return i.jsx(c,{...r,...t,ref:s})});Se.displayName="AlertDialogAction";var Te="AlertDialogCancel",$e=N.forwardRef((e,s)=>{const{__scopeAlertDialog:a,...t}=e,{cancelRef:r}=ke(Te,a),l=fe(a),n=u(s,r);return i.jsx(c,{...l,...t,ref:n})});$e.displayName=Te;var Ee=({contentRef:e})=>{const s=`\`${ve}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${ve}\` by passing a \`${De}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ve}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var s;document.getElementById(null==(s=e.current)?void 0:s.getAttribute("aria-describedby"))},[s,e]),null},Ie=je,Le=be,Pe=Ne,Fe=ye,ze=_e,Me=Se,Oe=$e,We=Re,Be=Ce;function He({...e}){return i.jsx(Ie,{"data-slot":"alert-dialog",...e})}function Ue({...e}){return i.jsx(Le,{"data-slot":"alert-dialog-trigger",...e})}function Ge({...e}){return i.jsx(Pe,{"data-slot":"alert-dialog-portal",...e})}function qe({className:s,...a}){return i.jsx(Fe,{"data-slot":"alert-dialog-overlay",className:e("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function Ve({className:s,...a}){return i.jsxs(Ge,{children:[i.jsx(qe,{}),i.jsx(ze,{"data-slot":"alert-dialog-content",className:e("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function Ye({className:s,...a}){return i.jsx("div",{"data-slot":"alert-dialog-header",className:e("flex flex-col gap-2 text-center sm:text-left",s),...a})}function Je({className:s,...a}){return i.jsx("div",{"data-slot":"alert-dialog-footer",className:e("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function Ke({className:s,...a}){return i.jsx(We,{"data-slot":"alert-dialog-title",className:e("text-lg font-semibold",s),...a})}function Qe({className:s,...a}){return i.jsx(Be,{"data-slot":"alert-dialog-description",className:e("text-muted-foreground text-sm",s),...a})}function Xe({className:s,...a}){return i.jsx(Me,{className:e(t(),s),...a})}function Ze({className:s,...a}){return i.jsx(Oe,{className:e(t({variant:"outline"}),s),...a})}function es({district:e,className:r}){const[l,n]=N.useState(null),[o,c]=N.useState(!0);return N.useEffect(()=>{e&&async function(){c(!0);try{const s=await fetch(`http://localhost:8000/api/ai/playbook/${e}`);if(!s.ok)throw new Error("Failed to fetch playbook");const a=await s.json();n(a)}catch(s){}finally{c(!1)}}()},[e]),o?i.jsx(ae,{className:a("h-[400px] w-full rounded-lg",r)}):l?i.jsxs(A,{className:a("border-border overflow-hidden bg-card/30 flex flex-col h-full",r),children:[i.jsx(R,{className:"bg-primary/5 border-b border-border py-4",children:i.jsxs(D,{className:"flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-primary",children:[i.jsx(Y,{className:"w-4 h-4"}),"Action Playbook: ",l.title]})}),i.jsxs(C,{className:"p-0 flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[i.jsxs("section",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-foreground-secondary uppercase tracking-widest",children:[i.jsx(J,{className:"w-3.5 h-3.5 text-primary"}),"Immediate Priorities"]}),i.jsx("div",{className:"grid gap-2.5",children:l.priorities.map((e,s)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-primary/5 border border-primary/10 rounded-lg group transition-colors hover:bg-primary/10",children:[i.jsx("div",{className:"mt-1 w-4 h-4 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 text-[10px] font-bold text-primary italic",children:s+1}),i.jsx("p",{className:"text-sm text-foreground leading-tight font-medium",children:e})]},s))})]}),i.jsxs("section",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-foreground-secondary uppercase tracking-widest",children:[i.jsx(K,{className:"w-3.5 h-3.5 text-emerald-500"}),"Administrative Protocols"]}),i.jsx("div",{className:"space-y-2",children:l.protocols.map((e,s)=>i.jsxs("div",{className:"flex items-center gap-3 text-sm text-foreground font-medium pl-1",children:[i.jsx(Q,{className:"w-3 h-3 text-primary/50"}),e]},s))})]}),i.jsxs("section",{className:"p-4 bg-background-tertiary rounded-lg border border-border-subtle space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-foreground-tertiary uppercase tracking-[0.2em]",children:[i.jsx(X,{className:"w-3 h-3"}),"Communication Strategy"]}),i.jsxs("p",{className:"text-xs text-foreground-secondary italic leading-relaxed",children:['"',l.comm_strategy,'"']})]})]}),i.jsx("div",{className:"px-5 pb-4 space-y-3",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(He,{children:[i.jsx(Ue,{asChild:!0,children:i.jsxs(s,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white border-none shadow-lg shadow-emerald-500/20",children:[i.jsx(K,{className:"w-4 h-4 mr-2"}),"Approve"]})}),i.jsxs(Ve,{children:[i.jsxs(Ye,{children:[i.jsxs(Ke,{className:"flex items-center gap-2",children:[i.jsx(K,{className:"w-5 h-5 text-emerald-600"}),"Approve Suggested Actions?"]}),i.jsxs(Qe,{children:["This will log your approval of the current playbook for ",e,". Administrative protocols will be formally initiated."]})]}),i.jsxs(Je,{children:[i.jsx(Ze,{children:"Cancel"}),i.jsx(Xe,{className:"bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>alert(`Action approved for ${e}`),children:"Confirm Approval"})]})]})]}),i.jsxs(He,{children:[i.jsx(Ue,{asChild:!0,children:i.jsxs(s,{variant:"destructive",className:"flex-1 shadow-lg shadow-destructive/20",children:[i.jsx(Z,{className:"w-4 h-4 mr-2"}),"Reject"]})}),i.jsxs(Ve,{children:[i.jsxs(Ye,{children:[i.jsxs(Ke,{className:"flex items-center gap-2",children:[i.jsx(V,{className:"w-5 h-5 text-destructive"}),"Reject Suggested Actions?"]}),i.jsxs(Qe,{children:["Are you sure you want to reject these suggested protocols for ",e,"? This action will be audited for compliance purposes."]})]}),i.jsxs(Je,{children:[i.jsx(Ze,{children:"Cancel"}),i.jsx(Xe,{className:a(t({variant:"destructive"})),onClick:()=>alert(`Action rejected for ${e}`),children:"Confirm Rejection"})]})]})]})]})}),i.jsxs("div",{className:"p-4 bg-primary/5 border-t border-border flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] text-foreground-tertiary font-medium",children:"Advisory only â€¢ Generated from NE-NETRA Intelligence"}),i.jsxs("button",{className:"text-[10px] font-bold text-primary uppercase tracking-wider hover:underline flex items-center gap-1",children:["Download SOP PDF",i.jsx(Q,{className:"w-3 h-3"})]})]})]})]}):null}function ss(){const e=v().pathname.split("/").filter(e=>e),s={"":"Dashboard",dashboard:"Dashboard",map:"Risk Map",analysis:"Risk Analysis",actions:"Advisory Actions",review:"Officer Review",audit:"Audit Log","Ne-Netra":"Home"};return 0===e.length||1===e.length&&"Ne-Netra"===e[0]?null:i.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-slate-600 dark:text-slate-400 mb-4",children:[i.jsxs(w,{to:"/Ne-Netra",className:"hover:text-slate-900 dark:hover:text-slate-100 transition-colors flex items-center gap-1",children:[i.jsx(ee,{className:"w-4 h-4"}),i.jsx("span",{children:"Home"})]}),e.map((a,t)=>{const r=`/${e.slice(0,t+1).join("/")}`,l=t===e.length-1,n=s[a]||a.charAt(0).toUpperCase()+a.slice(1);return i.jsxs(y.Fragment,{children:[i.jsx(Q,{className:"w-4 h-4"}),l?i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:n}):i.jsx(w,{to:r,className:"hover:text-slate-900 dark:hover:text-slate-100 transition-colors",children:n})]},r)})]})}const as=N.lazy(()=>r(()=>import("./risk-map-COcMwpt3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>({default:e.RiskMap})));function ts({riskData:e,stats:s,loading:a,selectedDistrict:t}){var r,l;return i.jsxs("div",{className:"space-y-6",children:[i.jsx(ss,{}),a?i.jsxs("div",{className:"space-y-6",children:[i.jsx(ae,{className:"h-[200px] rounded-lg"})," ",i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(ae,{className:"h-[320px] rounded-lg"}),i.jsx(ae,{className:"lg:col-span-2 h-[320px] rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx(ae,{className:"lg:col-span-2 h-[350px] rounded-lg"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(ae,{className:"h-[108px] rounded-lg"}),i.jsx(ae,{className:"h-[108px] rounded-lg"})]})]})]}):i.jsx(i.Fragment,{children:e?i.jsxs(i.Fragment,{children:[i.jsx(he,{district:t,className:"mb-2"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-6",children:[i.jsx(ge,{score:e.score,trend:e.trend,riskLevel:e.risk_level,lastUpdated:new Date(e.timestamp).toLocaleTimeString(),components:e.components,layer_scores:e.layer_scores,district:t,primary_trigger:e.primary_trigger,className:"flex-1"}),i.jsxs(A,{className:"border-border-subtle",children:[i.jsx(R,{className:"pb-2",children:i.jsx(D,{className:"text-xs font-bold text-foreground-secondary uppercase tracking-widest",children:"Active Hotspots Summary"})}),i.jsx(C,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(e.hotspots||[]).slice(0,4).map((e,s)=>i.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-background-tertiary rounded border border-border-subtle",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(te,{level:e.severity,size:"sm"}),i.jsx("span",{className:"text-sm font-medium text-foreground",children:e.location})]}),i.jsxs("span",{className:"text-[10px] text-foreground-tertiary font-mono",children:[e.incidents," Signals"]})]},s)),0===((null==(r=e.hotspots)?void 0:r.length)||0)&&i.jsx("div",{className:"col-span-2 text-xs text-foreground-tertiary italic",children:"No active hotspots detected in this district."})]})})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(es,{district:t})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(A,{className:"lg:col-span-2 overflow-hidden border-border-subtle",children:[i.jsx(R,{className:"bg-card-header/50 border-b border-border pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(D,{className:"text-base font-medium text-foreground",children:"Geographic Risk Preview"}),i.jsx("span",{className:"text-xs text-foreground-tertiary uppercase tracking-wider",children:"Live H3 Layer"})]})}),i.jsx("div",{className:"h-[250px] relative bg-background-tertiary",children:i.jsx(N.Suspense,{fallback:i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"text-foreground-secondary text-sm",children:"Loading map..."})}),children:i.jsx(as,{district:t,velocity:(null==(l=e.components)?void 0:l.velocity)||0})})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs(A,{className:"p-4 flex items-center gap-4 border-border-subtle bg-card/50",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded text-primary",children:i.jsx(X,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-foreground-secondary uppercase tracking-wider",children:"Signals Analyzed"}),i.jsx("p",{className:"text-2xl font-mono font-bold text-foreground",children:(null==s?void 0:s.total_messages)||0})]})]}),i.jsxs(A,{className:"p-4 flex items-center gap-4 border-border-subtle bg-card/50",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded text-primary",children:i.jsx(se,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-foreground-secondary uppercase tracking-wider",children:"Officer Reviews"}),i.jsx("p",{className:"text-2xl font-mono font-bold text-foreground",children:(null==s?void 0:s.reviews_submitted)||0})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center p-12 py-24 text-center border border-dashed border-border rounded-lg bg-card/50",children:[i.jsx("div",{className:"rounded-full bg-background-tertiary p-3 mb-4",children:i.jsx($,{className:"w-6 h-6 text-foreground-tertiary"})}),i.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No Intelligence Data"}),i.jsx("p",{className:"text-foreground-secondary max-w-sm mt-2",children:"Select a district with active data or ingest new intelligence to generate a risk profile."})]})})]})}export{ts as DashboardPage};
