import{j as e}from"./vendor-ui-BuuLDXGn.js";import{a as s}from"./vendor-react-ChnU68HB.js";import{C as t,a as r,b as i,c as a}from"./card-BjFo6Q3V.js";import{B as l,d as n}from"./index-BhSNNFVA.js";import{G as o,J as c,m as d,K as m}from"./vendor-icons-DLa0eLQi.js";import"./vendor-charts-BrSaxJ5v.js";function u({districts:u,onIngestComplete:x}){const[g,p]=s.useState(u[0]||""),[h,y]=s.useState(""),[f,b]=s.useState("public_forum"),[j,v]=s.useState("normal"),[N,w]=s.useState(!1),[k,S]=s.useState(null);return e.jsxs(t,{className:"w-full bg-card border-border mb-6",children:[e.jsx(r,{className:"pb-2 border-b border-border",children:e.jsxs(i,{className:"flex items-center gap-2 text-lg font-medium text-foreground",children:[e.jsx(o,{className:"w-5 h-5 text-severity-low"}),"Ingest New Intelligence"]})}),e.jsx(a,{className:"pt-4",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(!0),S(null);try{const e={district:g,text:h,source_type:f,geo_sensitivity:j};await n.ingestMessage(e),await n.analyzeDistrict(g),S({type:"success",message:"Message ingested and analyzed successfully."}),y(""),x()}catch(s){S({type:"error",message:"Failed to ingest message."})}finally{w(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{id:"label-target-district",htmlFor:"target-district",className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Target District"}),e.jsx("select",{title:"Target District",name:"target-district",id:"target-district","aria-labelledby":"label-target-district",value:g,onChange:e=>p(e.target.value),className:"w-full bg-background-tertiary border border-border rounded-md px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:u.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{id:"label-source-type",htmlFor:"source-type",className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Source Type"}),e.jsxs("select",{title:"Source Type",name:"source-type",id:"source-type","aria-labelledby":"label-source-type",value:f,onChange:e=>b(e.target.value),className:"w-full bg-background-tertiary border border-border rounded-md px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:"public_forum",children:"Public Forum"}),e.jsx("option",{value:"news_report",children:"News Report"}),e.jsx("option",{value:"social_media",children:"Social Media (Public)"}),e.jsx("option",{value:"tip_line",children:"Anonymous Tip"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{id:"label-geo-sensitivity",htmlFor:"geo-sensitivity",className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Geo Sensitivity"}),e.jsxs("select",{title:"Geo Sensitivity",name:"geo-sensitivity",id:"geo-sensitivity","aria-labelledby":"label-geo-sensitivity",value:j,onChange:e=>v(e.target.value),className:"w-full bg-background-tertiary border border-border rounded-md px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:"normal",children:"Normal Area"}),e.jsx("option",{value:"market",children:"Market / Commercial"}),e.jsx("option",{value:"highway",children:"Highway / Transit"}),e.jsx("option",{value:"sensitive_zone",children:"Sensitive Zone"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Message Content"}),e.jsx("textarea",{value:h,onChange:e=>y(e.target.value),placeholder:"Paste text content here for analysis...",className:"w-full h-24 bg-background-tertiary border border-border rounded-md px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm resize-none",required:!0})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex-1",children:k&&e.jsxs("div",{className:"flex items-center gap-2 text-sm "+("success"===k.type?"text-severity-low":"text-severity-high"),children:["success"===k.type?e.jsx(c,{className:"w-4 h-4"}):e.jsx(d,{className:"w-4 h-4"}),k.message]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-background-tertiary p-3 rounded-md border border-border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Ingest Timestamp (IST)"}),e.jsx("div",{className:"font-mono text-sm text-foreground",children:(new Date).toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-foreground-tertiary uppercase tracking-wider",children:"Data Classification"}),e.jsxs("div",{className:"font-mono text-sm text-foreground flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-severity-low"}),"Synthetic / Public"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-xs text-foreground-tertiary",children:"All ingested data in this pilot is synthetic or publicly available."}),e.jsx(l,{type:"submit",variant:"default",className:"w-full bg-primary hover:bg-primary-hover text-primary-foreground",disabled:N||!g||!h,children:N?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-4 h-4 mr-2 animate-spin"}),"Ingesting..."]}):"Ingest Intelligence"})]})]})})]})}function x({districts:s,onIngestComplete:t}){return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-foreground",children:"Ingest Intelligence"}),e.jsx("p",{className:"text-foreground-secondary mt-1",children:"Securely submit raw intelligence for AI processing and risk analysis. All inputs are logged and classified."})]}),e.jsx(u,{districts:s,onIngestComplete:t}),e.jsxs("div",{className:"rounded-md bg-background-secondary border border-border p-4 mt-8",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Ingestion Guidelines"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-foreground-secondary space-y-1",children:[e.jsx("li",{children:"Ensure district selection matches the content source."}),e.jsx("li",{children:'Mark "Sensitive Zone" for intelligence related to border areas or critical infrastructure.'}),e.jsx("li",{children:"Verify source reliability before submission."})]})]})]})}export{x as IngestPage};
